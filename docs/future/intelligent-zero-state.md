# Intelligent Zero State — Context-Aware Suggestions for Everyone

Status: Draft

This plan proposes an intelligent zero state for Familiar that uses AI to generate contextually relevant suggestions based on the user's current context and activity. Instead of staring at an empty window, users see helpful suggestions that anticipate their needs - whether they're organizing files, creating documents, or solving problems.

---

## Philosophy: Intent Without Intimidation

The zero state serves two critical purposes:

1. **For new users**: Shows what Familiar can do without overwhelming them
2. **For returning users**: Offers contextually relevant starting points

**The challenge**: Make suggestions feel helpful, not pushy. Inspiring, not demanding. Universal, not niche.

---

## Goals

- **Universal**: Relevant to anyone, from grandma to developer
- **Contextual**: Reflects what the user is actually doing right now
- **Intelligent**: Generated by Claude, not hardcoded templates
- **Non-blocking**: User can ignore and type immediately
- **Inspiring**: Shows the breadth of what's possible
- **Private**: Context gathered locally, nothing persisted without consent

---

## Full Vision (Future)

When a user opens Familiar to an empty transcript, they see:

### Warm Greeting

**Visual-only mode**:

```
What can I help you with today?

I could help you:
• Organize your desktop (150 files!)
• Create something from scratch
• Find information about anything
• Solve a problem you're facing
```

**Voice mode**:

```
[Familiar speaks]: "Hi! What can I help you with?"

[Visual shows same suggestions while listening]
```

### AI-Generated Suggestions (4 cards)

Claude analyzes minimal context (time of day, workspace state) and generates suggestions across categories:

**Generated Examples** (weekday afternoon):

1. "Organize my cluttered desktop" (problem-solving)
2. "Help me research [trending topic]" (learning)
3. "Create a simple document or image" (creative)
4. "Figure out how to do something I've never done" (exploration)

### Interaction Modes

**Visual + Mouse**:

- Click suggestion → populates input field
- User can edit before sending
- Or ignore and type own request

**Voice**:

- Say any suggestion → Familiar acts
- Say something else → Familiar adapts
- Suggestions guide but don't constrain

### Adaptive Behavior

**First time user**:

- Shows broad, inspiring suggestions
- "Try anything" tone
- Educational about capabilities

**Returning user**:

- Context-aware (noticed desktop is messy)
- Can reference previous work
- "Pick up where you left off" option

---

## Suggestion Categories: Intent to Action

Suggestions must show **breadth** of Familiar's capabilities. Never coding-focused.

### 1. Creative/Generative

**What it is**: Make something new

**Examples**:

- "Help me write a birthday invitation"
- "Create a simple website for my hobby"
- "Design a flyer for my yard sale"
- "Generate an image from my description"
- "Write a poem for my partner"

### 2. Organization/Management

**What it is**: Bring order to chaos

**Examples**:

- "Organize my desktop files by type"
- "Find and archive old documents"
- "Sort my photos by date"
- "Create a folder structure for my project"
- "Clean up my downloads folder"

### 3. Research/Learning

**What it is**: Understand something

**Examples**:

- "Explain how [something] works"
- "Research options for [decision I'm making]"
- "Find information about [topic I'm curious about]"
- "Compare [option A] vs [option B]"
- "Teach me something new today"

### 4. Problem-Solving

**What it is**: Figure something out

**Examples**:

- "Help me figure out my taxes"
- "Find a solution to [problem I'm facing]"
- "Debug why [thing isn't working]"
- "Create a plan for [goal I have]"
- "Fix [something that's broken]"

### 5. Unexpected/Magical

**What it is**: Things they didn't know were possible

**Examples**:

- "Show me something surprising I can do"
- "What's something useful I haven't thought of?"
- "Automate a tedious task for me"
- "Turn this [thing] into that [other thing]"
- "Make my life easier in a way I haven't imagined"

**Key principle**: Never more than one tech/coding example. Most users aren't developers.

---

## Context Gathering (Respectful & Minimal)

### V1: Bare Minimum Context

- Time of day
- Day of week
- User has opened Familiar (that's it)

**Why minimal**: Privacy, speed, simplicity

### V2: Environmental Awareness (Optional)

User can opt-in to context gathering:

**Desktop state**:

- File count on desktop (if > 100, might suggest organizing)
- Recent downloads (if many, might suggest sorting)

**Calendar** (with permission):

- Upcoming events (might suggest preparation)
- Date context (tax season, holidays, etc.)

**Recently used apps**:

- Photo editing → suggest photo organization
- Browser → suggest research help
- Nothing recent → suggest exploration

### V3+: Session Memory

- What user worked on last time
- Common patterns ("You often ask me to organize files")
- Project context ("Still working on that pottery website?")

**All optional. All local. All transparent.**

---

## Voice Integration

Voice changes everything about zero state.

### Visual-Only Zero State

```
┌─────────────────────────────────┐
│  What can I help you with?      │
│                                 │
│  [Organize desktop]             │
│  [Create something]             │
│  [Research topic]               │
│  [Something else]               │
└─────────────────────────────────┘
```

### Voice-First Zero State

```
[User presses hotkey]

Familiar: "Hi! What can I help you with?"

[Shows suggestions visually while waiting]

User says anything → conversation begins
User clicks suggestion → conversation begins
```

### Pure Voice Mode (No Window)

```
User: "Hey Familiar"

Familiar: "I'm listening"

[No suggestions needed - user already knows what they want]

User: "Organize my desktop"

Familiar: "Sure! I found 150 files..."
```

**Insight**: Voice-first users often don't need suggestions - they already have intent. Suggestions are backup, not primary.

---

## AI Generation Strategy

### V1: Smart Static (Launching Soon)

**Approach**: Hand-crafted suggestions that rotate based on minimal context

**Implementation**:

```python
def get_suggestions(time_of_day, day_of_week):
    suggestions = []

    # Always show breadth
    suggestions.append(random.choice(CREATIVE_SUGGESTIONS))
    suggestions.append(random.choice(ORGANIZATION_SUGGESTIONS))
    suggestions.append(random.choice(RESEARCH_SUGGESTIONS))

    # Fourth is contextual
    if time_of_day == "morning":
        suggestions.append("Plan today's priorities")
    elif day_of_week in ["Saturday", "Sunday"]:
        suggestions.append("Help with a weekend project")
    else:
        suggestions.append(random.choice(UNEXPECTED_SUGGESTIONS))

    return suggestions
```

**Cost**: $0 (no AI generation)
**Latency**: < 1ms
**Quality**: Generic but useful

### V2: Lightweight AI Variations

**Approach**: Take static suggestions and ask Claude to generate variations

**Prompt**:

```
Generate 4 short, inspiring suggestions for what I could help with right now.

Context: {time_of_day}, {day_of_week}

Show the breadth of what's possible:
- One creative/generative task
- One organization/management task
- One research/learning task
- One unexpected/magical possibility

Be specific, actionable, and inspiring. 5-8 words each.
Think: intent to action. This is for everyone, not just developers.
Return as JSON array.

Example format:
["Organize cluttered desktop files", "Create a birthday invitation",
"Research anything you're curious about", "Automate a tedious task"]
```

**Model selection**:

- If user authenticated with claude.ai → Sonnet 4.5 (subsidized, high quality)
- If user using API key → Haiku (cost-conscious, still good)

**Token budget**:

- Input: ~150 tokens
- Output: ~50 tokens
- Total: ~200 tokens per zero state view

**Cost**:

- Sonnet: ~$0.0006 per view
- Haiku: ~$0.00006 per view

**Latency**: 0.5-1 second

**Quality**: Fresh, contextual, varied

### V3+: Rich Context Generation

**Approach**: Add environmental context for truly personal suggestions

**Prompt additions**:

```
Additional context:
- Workspace: {workspace_name}
- Desktop state: {file_count} files, mostly {file_types}
- Recent activity: {recently_modified_files}
- Time since last session: {session_gap}
- Previous topic: {last_conversation_topic} (if applicable)
```

**This enables**:

- "Continue organizing your desktop (still 150 files)"
- "Pick up where we left off on that website"
- "I noticed you haven't cleaned downloads in a while"

**Creepiness line**: Must feel helpful, not surveillance. Always transparent about what context is being used.

---

## UX Design

### Visual Design (Refined Simplicity)

```
┌─────────────────────────────────────────┐
│                                         │
│     What can I help you with today?     │
│                                         │
│  ┌────────────────────────────────────┐│
│  │ 📋 Organize cluttered desktop      ││
│  └────────────────────────────────────┘│
│                                         │
│  ┌────────────────────────────────────┐│
│  │ ✨ Create something from scratch   ││
│  └────────────────────────────────────┘│
│                                         │
│  ┌────────────────────────────────────┐│
│  │ 🔍 Research anything you're        ││
│  │    curious about                   ││
│  └────────────────────────────────────┘│
│                                         │
│  ┌────────────────────────────────────┐│
│  │ 🎁 Surprise me with something      ││
│  │    useful                          ││
│  └────────────────────────────────────┘│
│                                         │
│                                         │
│  Or just type what you need...         │
│  ┌────────────────────────────────────┐│
│  │                                    ││
│  └────────────────────────────────────┘│
└─────────────────────────────────────────┘
```

**Design notes**:

- Clean, generous spacing
- Friendly icons (not mystical)
- Soft colors (not loud)
- Buttons feel inviting, not demanding
- Text input always visible and accessible

### Interaction Patterns

**On hover**:

- Subtle highlight (accent color, low opacity)
- No dramatic effects

**On click**:

- Suggestion populates text field
- Cursor moves to end
- User can edit or immediately send
- Suggestion cards fade out

**On typing**:

- Zero state fades out immediately
- User has full control

**Empty again**:

- Zero state fades back in
- Shows fresh suggestions (regenerated)

### Animation (Purposeful, Not Flashy)

**Fade in** (on open):

- Greeting appears (0.2s fade)
- Suggestions appear sequentially (0.1s delay each)
- Feels alive, not overwhelming

**Fade out** (on interaction):

- Instant (no delay)
- User action is priority

**Shimmer** (while generating):

- Subtle pulse on suggestion cards
- Indicates they're being personalized
- Only if generation takes > 0.5s

---

## Language Guidelines

### Greeting

**Do**:

- "What can I help you with today?"
- "How can I help?"
- "What are you working on?"

**Don't**:

- "Welcome to Familiar" (corporate)
- "Enter your prompt" (technical)
- "Ask me anything" (intimidating openness)

### Suggestion Text

**Do**:

- "Organize cluttered desktop"
- "Create a birthday invitation"
- "Research anything you're curious about"
- "Help me figure out [problem]"

**Don't**:

- "Execute desktop organization algorithm" (technical)
- "Generate creative content" (vague)
- "Perform research query" (robotic)
- "Debug your code" (assumes technical user)

### Tone

- **Helpful**: "I'm here to assist"
- **Confident**: "I can do that"
- **Humble**: "Let's figure this out together"
- **Warm**: "Happy to help!"

**Not**:

- Overly enthusiastic ("OMG let's do this!!!")
- Corporate ("Your request is being processed")
- Technical ("Awaiting input")
- Cutesy ("Heya! What's cookin'?")

---

## Technical Implementation

### Backend Endpoint

**`POST /zero-state/suggestions`** (V2+)

**Request**:

```json
{
  "context": {
    "time_of_day": "afternoon",
    "day_of_week": "Tuesday",
    "workspace_name": "Documents"
  },
  "count": 4
}
```

**Response**:

```json
{
  "suggestions": [
    "Organize cluttered desktop files",
    "Create a simple presentation",
    "Research vacation destinations",
    "Automate a repetitive task"
  ]
}
```

**Implementation** (`backend/src/palette_sidecar/zero_state.py`):

```python
from .claude_service import session

async def generate_suggestions(context: dict, count: int = 4) -> list[str]:
    """Generate contextual zero state suggestions using Claude."""

    prompt = build_suggestion_prompt(context)

    # Use appropriate model based on auth mode
    model = "claude-sonnet-4-5-20250929" if is_claude_auth() else "claude-haiku-20250305"

    response = await session.query(prompt, model=model)
    suggestions = parse_suggestions(response)

    return suggestions[:count]
```

### Frontend Component

**`ZeroStateView.swift`**:

```swift
struct ZeroStateView: View {
    @ObservedObject var viewModel: FamiliarViewModel
    @State private var suggestions: [String] = []
    @State private var isLoading = true

    var body: some View {
        VStack(spacing: 24) {
            Text("What can I help you with today?")
                .font(.title2)
                .foregroundStyle(.primary)

            if isLoading {
                // Shimmer loading state
                ForEach(0..<4) { _ in
                    ShimmerCard()
                }
            } else {
                ForEach(suggestions, id: \.self) { suggestion in
                    SuggestionCard(text: suggestion) {
                        viewModel.populatePrompt(suggestion)
                    }
                }
            }

            Text("Or just type what you need...")
                .font(.caption)
                .foregroundStyle(.secondary)
        }
        .padding(32)
        .task {
            await loadSuggestions()
        }
    }

    private func loadSuggestions() async {
        suggestions = await viewModel.fetchZeroStateSuggestions()
        isLoading = false
    }
}
```

### Integration

**Show zero state when**:

- Transcript is empty
- User hasn't started typing
- Not currently in a conversation

**Hide zero state when**:

- User starts typing (immediate)
- Conversation begins
- User explicitly dismisses

**Regenerate when**:

- User returns to empty transcript
- > 5 minutes since last generation
- Context has changed significantly

---

## Privacy & Performance

### Privacy Considerations

**What we collect**:

- Time of day (approximate)
- Day of week
- That Familiar was opened (session count)

**What we don't collect**:

- File names or contents
- Personal information
- Suggestion click tracking (no analytics)

**User control**:

- Can disable suggestions in settings
- Can opt-in to richer context (V2+)
- Always transparent about what's used

### Performance

**V1 (Static)**:

- Load time: < 10ms
- Cost: $0
- Always available offline

**V2 (AI Generated)**:

- Load time: 500ms-1s
- Cost per user per day: ~$0.01-0.10 (depends on usage)
- Requires internet
- Fallback to V1 if offline/slow

**Token budget per user per day**:

- Open Familiar 10 times
- 10 × 200 tokens = 2,000 tokens
- ~$0.006 (Haiku) or ~$0.06 (Sonnet)
- Negligible cost, high value

---

## Success Metrics

### Engagement

- % of sessions where suggestion clicked: Target 30%+
- % of users who try suggestions: Target 50%+

### Quality

- User satisfaction with suggestions (future survey)
- Diversity of suggestion categories
- Suggestions lead to successful task completion

### Performance

- Latency < 1s for suggestion generation
- Token budget < $0.10 per user per day
- Zero state available offline (V1 fallback)

---

## Future Enhancements

### Session Memory Integration

- "Continue where you left off"
- "You often organize files on Mondays"
- "Still working on that project?"

### Collaborative Suggestions

- "Your teammate asked about [topic]"
- "There's a shared file you haven't reviewed"

### Learning Preferences

- Notice which suggestions users prefer
- Adapt categories to user's style
- But never remove breadth entirely

### Multi-Modal Context

- "You have 47 photos selected"
- "You're looking at [app/website]"
- "You just said [voice context]"

---

## Implementation Roadmap

### Phase 1: V1 Static (Now)

**Timeline**: 1 week

- Create `ZeroStateView` component
- Integrate into `FamiliarWindow`
- Hand-craft 20 suggestions across categories
- Rotate based on time/day
- Click populates input field

**Outcome**: Something better than empty window, zero cost

### Phase 2: V2 AI Generation (Soon)

**Timeline**: 2 weeks after V1

- Backend `/zero-state/suggestions` endpoint
- Claude-generated variations
- Model selection based on auth
- Frontend fetches on appear
- Shimmer loading state

**Outcome**: Fresh, contextual suggestions

### Phase 3: Voice Integration

**Timeline**: Concurrent with voice work

- Voice greeting: "What can I help you with?"
- Suggestions as examples while listening
- Voice-first users can ignore suggestions
- Visual backup for voice interaction

**Outcome**: Zero state works for voice users

### Phase 4: V3 Rich Context (Later)

**Timeline**: 3-4 months

- Opt-in context gathering
- Desktop state awareness
- Session memory integration
- Personalized suggestions

**Outcome**: Truly intelligent starting point

---

## Open Questions

1. Should suggestions animate in or appear instantly?
2. How many suggestions is optimal? (4 feels right)
3. Should there be a "refresh suggestions" button?
4. Do we show category labels or just suggestions?
5. Should voice mode show different suggestions?
6. How do we handle offensive/inappropriate generated suggestions?

---

## Related Documents

- **`aesthetic-system.md`**: Design system for zero state UI
- **`voice-assistant.md`**: Voice integration with zero state
- **`hidden-delights.md`**: Easter eggs that could appear as suggestions

---

_The zero state is the first impression. Make it welcoming, inspiring, and universally accessible._

**Last Updated**: September 30, 2025
**Status**: Draft — V1 implementation ready to begin
